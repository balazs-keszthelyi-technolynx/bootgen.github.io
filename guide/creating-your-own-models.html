


<!DOCTYPE html>
<html lang="en">
  <head><meta name="generator" content="Hexo 3.9.0">
    <title>Creating Your Own Models — BootGen</title>
    <meta charset="utf-8">
    <meta name="description" content="BootGen - Code Generator for ASP.Net Core and Vue.js">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <link rel="alternate" hreflang="x-default" href="https://vuejs.org/guide/creating-your-own-models.html">
    <link rel="alternate" hreflang="zh" href="https://cn.vuejs.org/guide/creating-your-own-models.html">
    <link rel="alternate" hreflang="ja" href="https://jp.vuejs.org/guide/creating-your-own-models.html">
    <link rel="alternate" hreflang="ru" href="https://ru.vuejs.org/guide/creating-your-own-models.html">
    <link rel="alternate" hreflang="ko" href="https://kr.vuejs.org/guide/creating-your-own-models.html">
    <link rel="alternate" hreflang="pt-BR" href="https://br.vuejs.org/guide/creating-your-own-models.html">
    <link rel="alternate" hreflang="fr" href="https://fr.vuejs.org/guide/creating-your-own-models.html">
    <link rel="alternate" hreflang="es" href="https://es.vuejs.org/guide/creating-your-own-models.html">

    <meta property="og:type" content="article">
    <meta property="og:title" content="Creating Your Own Models — BootGen">
    <meta property="og:description" content="BootGen - Code Generator for ASP.Net Core and Vue.js">
    <meta property="og:image" content="https://bootgen.com//images/logo.png">

    <link rel="apple-touch-icon" sizes="57x57" href="/images/icons/apple-icon-57x57.png">
    <link rel="apple-touch-icon" sizes="60x60" href="/images/icons/apple-icon-60x60.png">
    <link rel="apple-touch-icon" sizes="72x72" href="/images/icons/apple-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="76x76" href="/images/icons/apple-icon-76x76.png">
    <link rel="apple-touch-icon" sizes="114x114" href="/images/icons/apple-icon-114x114.png">
    <link rel="apple-touch-icon" sizes="120x120" href="/images/icons/apple-icon-120x120.png">
    <link rel="apple-touch-icon" sizes="144x144" href="/images/icons/apple-icon-144x144.png">
    <link rel="apple-touch-icon" sizes="152x152" href="/images/icons/apple-icon-152x152.png">
    <link rel="apple-touch-icon" sizes="180x180" href="/images/icons/apple-icon-180x180.png">
    <link rel="icon" type="image/png" sizes="192x192" href="/images/icons/android-icon-192x192.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/images/icons/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="96x96" href="/images/icons/favicon-96x96.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/images/icons/favicon-16x16.png">
    <meta name="msapplication-TileImage" content="/images/icons/ms-icon-144x144.png">
    <link rel="icon" href="/images/logo.png" type="image/png">

    <meta name="msapplication-TileColor" content="#22195b">
    <meta name="theme-color" content="#22195b">

    <meta name="msapplication-config" content="browserconfig.xml">
    <link rel="manifest" href="/manifest.json">

    <link href="https://fonts.googleapis.com" rel="preconnect" crossorigin>
    <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
    <link href="https://maxcdn.bootstrapcdn.com" rel="preconnect" crossorigin>

    <link href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,600|Roboto Mono&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Dosis:500&text=Vue.js&display=swap" rel="stylesheet">

    <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet">

    <!-- main page styles -->
    <link rel="stylesheet" href="/css/page.css">

    

    <script>
      window.PAGE_TYPE = "guide"
    </script>

    <!-- ga -->
    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-46852172-1', 'bootgen.com');
      ga('send', 'pageview');
    </script>

    <!-- vimeo analytics -->
    <script type="text/javascript" defer="defer" src="https://extend.vimeocdn.com/ga/72160148.js"></script>
  </head>
  <body class="docs">
    <div id="mobile-bar">
      <a class="menu-button"></a>
      <a class="logo" href="/"></a>
    </div>
    <div>

  <header id="header">
    <a id="logo" href="/">
      <img src="/images/logo.png" alt="vue logo">
      <span>BootGen</span>
    </a>
    <ul id="nav">
      
<li>
  <a href="/guide" class="nav-link">Documentation</a>
</li>
    </ul>
  </header>
</div>

    
      <div id="main" class="fix-sidebar">
        
  

<div class="sidebar">
  <div class="sidebar-inner">
    
    <div class="list">
      
        <h2>
          
          Guide
        </h2>
        <ul class="menu-root">
  
    
    
      
        <li><h3>Getting Started</h3></li>
      
      
      
      
      
      
      
      
      
      
    
    <li>
      <a href="/guide/index.html" class="sidebar-link">Introduction</a>
    </li>
  
    
    
      
      
      
      
      
      
      
      
      
      
    
    <li>
      <a href="/guide/installation.html" class="sidebar-link">Installation</a>
    </li>
  
    
    
      
      
      
      
      
      
      
      
      
      
    
    <li>
      <a href="/guide/pre-defined-models.html" class="sidebar-link">Pre-defined Models</a>
    </li>
  
    
    
      
      
      
      
      
      
      
      
      
      
    
    <li>
      <a href="/guide/configuration.html" class="sidebar-link">Configuration</a>
    </li>
  
    
    
      
      
      
      
      
      
      
      
      
      
    
    <li>
      <a href="/guide/creating-your-own-models.html" class="sidebar-link current">Creating Your Own Models</a>
    </li>
  
    
    
      
      
      
      
      
      
      
      
      
      
    
    <li>
      <a href="/guide/customization-options.html" class="sidebar-link">Customization Options</a>
    </li>
  
    
    
      
      
      
      
      
      
      
      
      
      
    
    <li>
      <a href="/api-documentation.html" class="sidebar-link">API Documentation</a>
    </li>
  
</ul>

      
    </div>
  </div>
</div>


<div class="content guide with-sidebar creating-your-own-models-guide">
  
    
  
  
    <h1>Creating Your Own Models</h1>
  
  
    <h2 id="The-Task-Entity"><a href="#The-Task-Entity" class="headerlink" title="The Task Entity"></a>The Task Entity</h2><p>In this section we will create an example To-Do list application with BootGen. The first thing in our domain model will be a task:</p>
<pre><code class="hljs csharp">[<span class="hljs-meta">HasTimestamps</span>]
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">Task</span>
&#123;
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">string</span> Title &#123; <span class="hljs-keyword">get</span>; <span class="hljs-keyword">set</span>; &#125;
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">string</span> Description &#123; <span class="hljs-keyword">get</span>; <span class="hljs-keyword">set</span>; &#125;
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">bool</span> IsDone &#123; <span class="hljs-keyword">get</span>; <span class="hljs-keyword">set</span>; &#125;
&#125;</code></pre>
<p>The <code>HasTimestamps</code> attribute on the <code>Task</code> class adds two properties to the model: a <code>Created</code> and an <code>Updated</code> timestamp.<br>If this attribute is set, then the default implementation of the <code>TasksService</code> will set these timestamps properties as needed.</p>
<p>In the <code>Configuration.cs</code> file we add this class to the API as a resource:</p>
<pre><code class="hljs csharp"><span class="hljs-function"><span class="hljs-keyword">internal</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">AddResources</span>(<span class="hljs-params">BootGenApi api</span>)</span>
&#123;
    UserResource = api.AddResource&lt;User&gt;(isReadonly: <span class="hljs-literal">true</span>, authenticate: <span class="hljs-literal">true</span>);
    api.AddResource&lt;Task&gt;(authenticate: <span class="hljs-literal">true</span>, parent: UserResource, parentName: <span class="hljs-string">"Owner"</span>);
&#125;</code></pre>
<p>We have set <code>UserResource</code> as parent of <code>TaskResource</code>, and so we have created a One-To-Many relationship between <code>User</code> and <code>Task</code>.<br>The REST API we will access the To-Do items on the following path: <code>/users/{userId}/tasks</code>.<br>Naming the parent “Owner” means that the <code>Task</code> entity class will refer to the user it belongs to as “Owner”.</p>
<p>Now users have a list of tasks. Lets change the <code>User</code> model to reflect that, by adding an other property:</p>
<pre><code class="hljs csharp"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">User</span>
&#123;
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">string</span> UserName &#123; <span class="hljs-keyword">get</span>; <span class="hljs-keyword">set</span>; &#125;
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">string</span> Email &#123; <span class="hljs-keyword">get</span>; <span class="hljs-keyword">set</span>; &#125;
    [<span class="hljs-meta">ServerOnly</span>]
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">string</span> PasswordHash &#123; <span class="hljs-keyword">get</span>; <span class="hljs-keyword">set</span>; &#125;
    [<span class="hljs-meta">Resource</span>]
    <span class="hljs-keyword">public</span> List&lt;Task&gt; Tasks &#123; <span class="hljs-keyword">get</span>; <span class="hljs-keyword">set</span>; &#125;
&#125;</code></pre>
<p>The <code>Resource</code> attribute on the property means that the task list is not part of the user entity, rather it is a nested resource. If we would run the generator now, we would see that the user entity classes remain unchanged by this modification. The only reason of declaring this property is, that we can extend the database seed. Lets do that by adding some example tasks for the first example user in the <code>Configuration.cs</code> file:</p>
<pre><code class="hljs csharp"><span class="hljs-function"><span class="hljs-keyword">internal</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">AddSeeds</span>(<span class="hljs-params">SeedDataStore seedStore</span>)</span>
&#123;
     seedStore.Add(UserResource, <span class="hljs-keyword">new</span> List&lt;User&gt; &#123;
        <span class="hljs-keyword">new</span> User &#123;
            UserName = <span class="hljs-string">"Sample User"</span>,
            Email = <span class="hljs-string">"example@email.com"</span>,
            PasswordHash = <span class="hljs-string">"AQAAAAEAACcQAAAAEL//UdrNeiFjd0hYeQEBOtAN+OXME8tu8kNMTg4wZUrBSt1/t0Okfs389I82ZaIU2Q=="</span>, <span class="hljs-comment">//password123</span>
            Tasks = <span class="hljs-keyword">new</span> List&lt;Task&gt; &#123;
                <span class="hljs-keyword">new</span> Task &#123;
                    Title = <span class="hljs-string">"Buy groceries"</span>,
                    Description = <span class="hljs-string">"Bread, Milk, Eggs"</span>
                &#125;,
                <span class="hljs-keyword">new</span> Task &#123;
                    Title = <span class="hljs-string">"Clean up"</span>,
                    Description = <span class="hljs-string">"Kitchen, Bathroom"</span>
                &#125;
            &#125;
        &#125;,
        <span class="hljs-keyword">new</span> User &#123;
            UserName = <span class="hljs-string">"Sample User 2"</span>,
            Email = <span class="hljs-string">"example2@email.com"</span>,
            PasswordHash = <span class="hljs-string">"AQAAAAEAACcQAAAAENZt+JlnUq5Ukt83M//z8Y/GlXWwYj6d260pmjQEz3Usac29eNfhmZTXHCGVOz70Hg=="</span> <span class="hljs-comment">//password123</span>
        &#125;,
        <span class="hljs-keyword">new</span> User &#123;
            UserName = <span class="hljs-string">"Sample User"</span>,
            Email = <span class="hljs-string">"example3@email.com"</span>,
            PasswordHash = <span class="hljs-string">"AQAAAAEAACcQAAAAENffyhoiBzkUXycLNzvQOYJJGCXsXw+7U2ZL1ED+kCFCnDmL4yGGQT7Xkr4ZaNV8/A=="</span> <span class="hljs-comment">//password123</span>
        &#125;
    &#125;);
&#125;</code></pre>
<p>Alright, lets run the generator! Use the following command in the <code>Generator</code> folder:</p>
<pre><code class="hljs sh">dotnet run</code></pre>
<p>Check the changes in git! You will see the following:</p>
<ul>
<li>A task entity is created both on the client and the server side</li>
<li>A nested controller is created</li>
<li>A service and a sevice interface is created</li>
<li>The service is registered to the dependency injection container</li>
<li>The <code>DbContext</code> was extended with a tasks <code>DBSet</code>, and the database seed was extended with our example tasks.</li>
<li>The REST API specification is extended in the <code>restapi.yml</code> file</li>
<li>The Vuex store is extended with the CRUD operations for the task entity</li>
</ul>
<h2 id="Playing-With-The-Application-From-The-Browser-Console"><a href="#Playing-With-The-Application-From-The-Browser-Console" class="headerlink" title="Playing With The Application From The Browser Console"></a>Playing With The Application From The Browser Console</h2><p class="tip warning v3-warning"> For this step you will need  Vue.js devtools for <a href="https://chrome.google.com/webstore/detail/vuejs-devtools/nhdogjmejiglipccpnnnanhbledajbpd?hl=en" target="_blank" rel="noopener">Chrome</a> or <a href="https://addons.mozilla.org/en-US/firefox/addon/vue-js-devtools/" target="_blank" rel="noopener">Firefox</a> </p>

<h3 id="Running-the-application"><a href="#Running-the-application" class="headerlink" title="Running the application"></a>Running the application</h3><p>To run the code we first need to initialize the database. If you have already done that, delete the <code>Migrations</code> folder and the <code>web_project.db</code> SQLite database. Navigate to the <code>WebProject</code> folder, then run the following commands:</p>
<pre><code class="hljs sh">rm -rf Migrations
rm web_project.db
dotnet ef migrations add InitialCreate
dotnet ef database update</code></pre>
<p>Starting up your project you probably want to do this offen. You can use the <code>resetdb.sh</code> script (or <code>resetdb.bat</code> on Windows) as a shortcut.</p>
<p>Start the server by running the following command:</p>
<pre><code class="hljs sh">dotnet run</code></pre>
<p>In a separate terminal window start the client, by running the following command in the <code>WebProject/ClietApp</code> folder:</p>
<pre><code class="hljs sh">npm run serve</code></pre>
<p>Navigate your browser to <a href="http://localhost:8080" target="_blank" rel="noopener">http://localhost:8080</a>, where you should see a login screen. Open the developer tools. (This can usually be done by hitting F12 or Ctrl + Shift + I or right-clicking anywhere on the and selecting “Inspect”.)</p>
<p>Select the “Vue” tab and click on the “Root” component. This will create a <code>$vm</code> variable which allows us to interact with our application from the console.</p>
<h3 id="Send-Login-Request"><a href="#Send-Login-Request" class="headerlink" title="Send Login Request"></a>Send Login Request</h3><p>Select the “Console” tab, and send a login request with the followin line of JavaScript code:</p>
<pre><code class="hljs javascript">loginResponse = <span class="hljs-keyword">await</span> $vm.$store.dispatch(<span class="hljs-string">'login'</span>, &#123;<span class="hljs-attr">email</span>: <span class="hljs-string">'example@email.com'</span>, <span class="hljs-attr">password</span>: <span class="hljs-string">'password123'</span>&#125;)</code></pre>
<p>output:<br><pre><code class="hljs json">&#123;
  <span class="hljs-attr">"jwt"</span>: <span class="hljs-string">"eyJhbGciOiJIU ... "</span>,
  <span class="hljs-attr">"user"</span>: &#123;
    <span class="hljs-attr">"id"</span>: <span class="hljs-number">1</span>,
    <span class="hljs-attr">"userName"</span>: <span class="hljs-string">"Sample User"</span>,
    <span class="hljs-attr">"email"</span>: <span class="hljs-string">"example@email.com"</span>
  &#125;
&#125;</code></pre></p>
<p>If the application is working correctly, then an object must have appeared on the console with a <code>user</code> and the <code>jwt</code> property. The value of the <code>jwt</code> (JSON Web Token) property is ou session token. Let’s store this token to be used in the following requests:<br><pre><code class="hljs javascript">$vm.$store.commit(<span class="hljs-string">'setJwt'</span>, loginResponse.jwt)</code></pre></p>
<h3 id="CRUD-operations-on-tasks"><a href="#CRUD-operations-on-tasks" class="headerlink" title="CRUD operations on tasks"></a>CRUD operations on tasks</h3><p>Save the logged-in user into a variabe:</p>
<pre><code class="hljs javascript">user = loginResponse.user</code></pre>
<p>Now that we are successfully logged in, we might query our tasks:<br><pre><code class="hljs javascript"><span class="hljs-keyword">await</span> $vm.$store.dispatch(<span class="hljs-string">'getTasksOfUser'</span>, user)</code></pre></p>
<p>output:<br><pre><code class="hljs json">[
  &#123;
    <span class="hljs-attr">"id"</span>: <span class="hljs-number">1</span>,
    <span class="hljs-attr">"title"</span>: <span class="hljs-string">"Buy groceries"</span>,
    <span class="hljs-attr">"description"</span>: <span class="hljs-string">"Bread, Milk, Eggs"</span>,
    <span class="hljs-attr">"isDone"</span>: <span class="hljs-literal">false</span>,
    <span class="hljs-attr">"created"</span>: <span class="hljs-string">"2020-09-26T17:41:00"</span>,
    <span class="hljs-attr">"updated"</span>: <span class="hljs-string">"2020-09-26T17:41:00"</span>
  &#125;,
  &#123;
    <span class="hljs-attr">"id"</span>: <span class="hljs-number">2</span>,
    <span class="hljs-attr">"title"</span>: <span class="hljs-string">"Clean up"</span>,
    <span class="hljs-attr">"description"</span>: <span class="hljs-string">"Kitchen, Bathroom"</span>,
    <span class="hljs-attr">"isDone"</span>: <span class="hljs-literal">false</span>,
    <span class="hljs-attr">"created"</span>: <span class="hljs-string">"2020-09-26T17:41:00"</span>,
    <span class="hljs-attr">"updated"</span>: <span class="hljs-string">"2020-09-26T17:41:00"</span>
  &#125;
]</code></pre></p>
<p>All queried resources are saved in the Vuex store, <code>$vm.$store.state.tasks</code> will contain all previously queried tasks. Calling<br><pre><code class="hljs javascript">$vm.$store.state.tasks.get(loginResponse.user.id)</code></pre></p>
<p>will return the same list of tasks as abbow.</p>
<h4 id="Add-A-Task"><a href="#Add-A-Task" class="headerlink" title="Add A Task"></a>Add A Task</h4><pre><code class="hljs javascript">newTask = <span class="hljs-keyword">await</span> $vm.$store.dispatch(<span class="hljs-string">'addTaskToUser'</span>, &#123;<span class="hljs-attr">user</span>: user, <span class="hljs-attr">task</span>: &#123;<span class="hljs-attr">title</span>: <span class="hljs-string">"Learn BootGen"</span>, <span class="hljs-attr">description</span>: <span class="hljs-string">"bootgen.com"</span>&#125;&#125;)</code></pre>
<p>output:<br><pre><code class="hljs json">&#123;
  <span class="hljs-attr">"id"</span>: <span class="hljs-number">3</span>,
  <span class="hljs-attr">"title"</span>: <span class="hljs-string">"Learn BootGen"</span>,
  <span class="hljs-attr">"description"</span>: <span class="hljs-string">"bootgen.com"</span>,
  <span class="hljs-attr">"isDone"</span>: <span class="hljs-literal">false</span>,
  <span class="hljs-attr">"created"</span>: <span class="hljs-string">"2020-09-27T09:59:45.8445397+02:00"</span>,
  <span class="hljs-attr">"updated"</span>: <span class="hljs-string">"2020-09-27T09:59:45.8445762+02:00"</span>
&#125;</code></pre></p>
<h4 id="Update"><a href="#Update" class="headerlink" title="Update"></a>Update</h4><pre><code class="hljs javascript">newTask.description = <span class="hljs-string">"bootgen.com/guide"</span>
<span class="hljs-keyword">await</span> $vm.$store.dispatch(<span class="hljs-string">'updateTaskOfUser'</span>, &#123;<span class="hljs-attr">user</span>: user, <span class="hljs-attr">task</span>: newTask&#125;)</code></pre>
<p>output:<br><pre><code class="hljs json">&#123;
  <span class="hljs-attr">"id"</span>: <span class="hljs-number">3</span>,
  <span class="hljs-attr">"title"</span>: <span class="hljs-string">"Learn BootGen"</span>,
  <span class="hljs-attr">"description"</span>: <span class="hljs-string">"bootgen.com/guide"</span>,
  <span class="hljs-attr">"isDone"</span>: <span class="hljs-literal">false</span>,
  <span class="hljs-attr">"created"</span>: <span class="hljs-string">"2020-09-27T09:59:45.8445397+02:00"</span>,
  <span class="hljs-attr">"updated"</span>: <span class="hljs-string">"2020-09-27T10:04:28.1653196+02:00"</span>
&#125;</code></pre></p>
<h4 id="Delete"><a href="#Delete" class="headerlink" title="Delete"></a>Delete</h4><pre><code class="hljs javascript">$vm.$store.dispatch(<span class="hljs-string">'deleteTaskOfUser'</span>, &#123;<span class="hljs-attr">user</span>: user, <span class="hljs-attr">task</span>: newTask&#125;)</code></pre>
<h3 id="Removing-redundancy"><a href="#Removing-redundancy" class="headerlink" title="Removing redundancy"></a>Removing redundancy</h3><p>What we did so far works fine, however, there is some redundancy when calling the update and delete method. Technically it would not be necessary to pass the user parameter, as the server knows already which user a task belongs to. To address this problem, add <code>Task</code> as a root resource:</p>
<pre><code class="hljs csharp"><span class="hljs-function"><span class="hljs-keyword">internal</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">AddResources</span>(<span class="hljs-params">BootGenApi api</span>)</span>
&#123;
    UserResource = api.AddResource&lt;User&gt;(isReadonly: <span class="hljs-literal">true</span>, authenticate: <span class="hljs-literal">true</span>);
    api.AddResource&lt;Task&gt;(authenticate: <span class="hljs-literal">true</span>, parent: UserResource, parentName: <span class="hljs-string">"Owner"</span>);
    api.AddResource&lt;Task&gt;(authenticate: <span class="hljs-literal">true</span>);
&#125;</code></pre>
<p>Run the generator, reset the database (with <code>resetdb.sh</code> or <code>resetdb.bat</code>) and restart the application. Now you can try the newly introduced CRUD operations:</p>
<h4 id="Add-A-Task-1"><a href="#Add-A-Task-1" class="headerlink" title="Add A Task"></a>Add A Task</h4><pre><code class="hljs javascript"><span class="hljs-keyword">await</span> $vm.$store.dispatch(<span class="hljs-string">'addTask'</span>,&#123;<span class="hljs-attr">title</span>: <span class="hljs-string">"Learn BootGen"</span>, <span class="hljs-attr">description</span>: <span class="hljs-string">"bootgen.com"</span>, <span class="hljs-attr">ownerId</span>: user.id&#125;)</code></pre>
<p>output:<br><pre><code class="hljs json">&#123;
  <span class="hljs-attr">"id"</span>: <span class="hljs-number">3</span>,
  <span class="hljs-attr">"title"</span>: <span class="hljs-string">"Learn BootGen"</span>,
  <span class="hljs-attr">"description"</span>: <span class="hljs-string">"bootgen.com"</span>,
  <span class="hljs-attr">"isDone"</span>: <span class="hljs-literal">false</span>,
  <span class="hljs-attr">"created"</span>: <span class="hljs-string">"2020-09-27T09:59:45.8445397+02:00"</span>,
  <span class="hljs-attr">"updated"</span>: <span class="hljs-string">"2020-09-27T09:59:45.8445762+02:00"</span>
&#125;</code></pre></p>
<h4 id="Update-1"><a href="#Update-1" class="headerlink" title="Update"></a>Update</h4><pre><code class="hljs javascript">newTask.description = <span class="hljs-string">"bootgen.com/guide"</span>
<span class="hljs-keyword">await</span> $vm.$store.dispatch(<span class="hljs-string">'updateTask'</span>, newTask)</code></pre>
<p>output:<br><pre><code class="hljs json">&#123;
  <span class="hljs-attr">"id"</span>: <span class="hljs-number">3</span>,
  <span class="hljs-attr">"title"</span>: <span class="hljs-string">"Learn BootGen"</span>,
  <span class="hljs-attr">"description"</span>: <span class="hljs-string">"bootgen.com/guide"</span>,
  <span class="hljs-attr">"isDone"</span>: <span class="hljs-literal">false</span>,
  <span class="hljs-attr">"created"</span>: <span class="hljs-string">"2020-09-27T09:59:45.8445397+02:00"</span>,
  <span class="hljs-attr">"updated"</span>: <span class="hljs-string">"2020-09-27T10:04:28.1653196+02:00"</span>
&#125;</code></pre></p>
<h4 id="Delete-1"><a href="#Delete-1" class="headerlink" title="Delete"></a>Delete</h4><pre><code class="hljs javascript">$vm.$store.dispatch(<span class="hljs-string">'deleteTask'</span>, newTask)</code></pre>
<p>We have now two sets of CRUD operations for the tasks. Make the nested task resource readonly to simplify it:</p>
<pre><code class="hljs csharp">api.AddResource&lt;Task&gt;(authenticate: <span class="hljs-literal">true</span>, parent: UserResource, parentName: <span class="hljs-string">"Owner"</span>, <span class="hljs-keyword">readonly</span>: <span class="hljs-literal">true</span>);</code></pre>
<h2 id="The-Tags-Entity"><a href="#The-Tags-Entity" class="headerlink" title="The Tags Entity"></a>The Tags Entity</h2><p>We now have a basis for a To-Do list application. But what if we also would like to tag certain tasks to be “important” or “urgent” or “fun”? What if we would also like to let users to define what tags they would like to use? For this reason, let’s create a <code>Tag</code> class:</p>
<pre><code class="hljs csharp"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">Tag</span>
&#123;
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">string</span> Name &#123; <span class="hljs-keyword">get</span>; <span class="hljs-keyword">set</span>; &#125;
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">string</span> Color &#123; <span class="hljs-keyword">get</span>; <span class="hljs-keyword">set</span>; &#125;
&#125;</code></pre>
<p>As we did previously with the User clas, add the tags list to the <code>Task</code> class:</p>
<pre><code class="hljs csharp">[<span class="hljs-meta">HasTimestamps</span>]
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">Task</span>
&#123;
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">string</span> Title &#123; <span class="hljs-keyword">get</span>; <span class="hljs-keyword">set</span>; &#125;
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">string</span> Description &#123; <span class="hljs-keyword">get</span>; <span class="hljs-keyword">set</span>; &#125;
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">bool</span> IsDone &#123; <span class="hljs-keyword">get</span>; <span class="hljs-keyword">set</span>; &#125;
    [<span class="hljs-meta">Resource</span>]
    <span class="hljs-keyword">public</span> List&lt;Tag&gt; Tags &#123; <span class="hljs-keyword">get</span>; <span class="hljs-keyword">set</span>; &#125;
&#125;</code></pre>
<p>The relation of the <code>Task</code> and the <code>Tag</code> class is Many-To-Many. This is specified when registering the resource:</p>
<pre><code class="hljs csharp"><span class="hljs-function"><span class="hljs-keyword">internal</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">AddResources</span>(<span class="hljs-params">BootGenApi api</span>)</span>
&#123;
    UserResource = api.AddResource&lt;User&gt;(isReadonly: <span class="hljs-literal">true</span>, authenticate: <span class="hljs-literal">true</span>);
    api.AddResource&lt;Task&gt;(authenticate: <span class="hljs-literal">true</span>, parent: UserResource, parentName: <span class="hljs-string">"Owner"</span>, <span class="hljs-keyword">readonly</span>: <span class="hljs-literal">true</span>);
    <span class="hljs-keyword">var</span> taskResource = api.AddResource&lt;Task&gt;(authenticate: <span class="hljs-literal">true</span>);
    api.AddResource&lt;Tag&gt;(authenticate: <span class="hljs-literal">true</span>);
    api.AddResource&lt;Tag&gt;(authenticate: <span class="hljs-literal">true</span>, parent: taskResource, manyToMany: <span class="hljs-literal">true</span>);
&#125;</code></pre>
<p>We have registered <code>Tag</code> as resource twice. The first is for maintaining a list of possible tags, the second is for assigning tags to tasks.</p>
<p>Add some sample tags to the database seed, by directly adding it to the tasks of the first user:</p>
<pre><code class="hljs csharp"><span class="hljs-keyword">new</span> User
&#123;
    UserName = <span class="hljs-string">"Sample User"</span>,
    Email = <span class="hljs-string">"example@email.com"</span>,
    PasswordHash = <span class="hljs-string">"AQAAAAEAACcQAAAAEL//UdrNeiFjd0hYeQEBOtAN+OXME8tu8kNMTg4wZUrBSt1/t0Okfs389I82ZaIU2Q=="</span>, <span class="hljs-comment">//password123</span>
    Tasks = <span class="hljs-keyword">new</span> List&lt;Task&gt; &#123;
         <span class="hljs-keyword">new</span> Task &#123;
             Title = <span class="hljs-string">"Buy groceries"</span>,
             Description = <span class="hljs-string">"Bread, Milk, Eggs"</span>,
             Tags = <span class="hljs-keyword">new</span> List&lt;Tag&gt; &#123; <span class="hljs-keyword">new</span> Tag &#123; Name = <span class="hljs-string">"Urgent"</span>, Color=<span class="hljs-string">"#ff0000"</span> &#125; &#125;
         &#125;,
         <span class="hljs-keyword">new</span> Task &#123;
             Title = <span class="hljs-string">"Clean up"</span>,
             Description = <span class="hljs-string">"Kitchen, Bathroom"</span>,
             Tags = <span class="hljs-keyword">new</span> List&lt;Tag&gt; &#123; <span class="hljs-keyword">new</span> Tag &#123; Name = <span class="hljs-string">"Important"</span>, Color=<span class="hljs-string">"#ff8800"</span> &#125; &#125;
         &#125;
     &#125;
&#125;</code></pre>
<p>Run the generator, reset the database and restart the application.</p>
<p>Run the following commands:</p>
<pre><code class="hljs javascript">loginResponse = <span class="hljs-keyword">await</span> $vm.$store.dispatch(<span class="hljs-string">'login'</span>, &#123;<span class="hljs-attr">email</span>: <span class="hljs-string">'example@email.com'</span>, <span class="hljs-attr">password</span>: <span class="hljs-string">'password123'</span>&#125;)
$vm.$store.commit(<span class="hljs-string">'setJwt'</span>, loginResponse.jwt)
user = loginResponse.user
newTask = <span class="hljs-keyword">await</span> $vm.$store.dispatch(<span class="hljs-string">'addTask'</span>,&#123;<span class="hljs-attr">title</span>: <span class="hljs-string">"Learn BootGen"</span>, <span class="hljs-attr">description</span>: <span class="hljs-string">"bootgen.com"</span>, <span class="hljs-attr">ownerId</span>: user.id&#125;)</code></pre>
<h4 id="Get-the-list-of-tags"><a href="#Get-the-list-of-tags" class="headerlink" title="Get the list of tags"></a>Get the list of tags</h4><pre><code class="hljs javascript"><span class="hljs-keyword">await</span> $vm.$store.dispatch(<span class="hljs-string">'getTags'</span>)</code></pre>
<p>output:<br><pre><code class="hljs json">[
  &#123;
    <span class="hljs-attr">"id"</span>: <span class="hljs-number">1</span>,
    <span class="hljs-attr">"name"</span>: <span class="hljs-string">"Urgent"</span>,
    <span class="hljs-attr">"color"</span>: <span class="hljs-string">"#ff0000"</span>
  &#125;,
  &#123;
    <span class="hljs-attr">"id"</span>: <span class="hljs-number">2</span>,
    <span class="hljs-attr">"name"</span>: <span class="hljs-string">"Important"</span>,
    <span class="hljs-attr">"color"</span>: <span class="hljs-string">"#ff8800"</span>
  &#125;
]</code></pre></p>
<h4 id="Create-a-new-tag"><a href="#Create-a-new-tag" class="headerlink" title="Create a new tag"></a>Create a new tag</h4><pre><code class="hljs javascript">fun = <span class="hljs-keyword">await</span> $vm.$store.dispatch(<span class="hljs-string">'addTag'</span>, &#123; <span class="hljs-attr">name</span>: <span class="hljs-string">'Fun'</span>, <span class="hljs-attr">color</span>: <span class="hljs-string">'#00ff00'</span> &#125;)</code></pre>
<p>output:<br><pre><code class="hljs json">&#123;
  <span class="hljs-attr">"id"</span>: <span class="hljs-number">3</span>,
  <span class="hljs-attr">"name"</span>: <span class="hljs-string">"Fun"</span>,
  <span class="hljs-attr">"color"</span>: <span class="hljs-string">"#00ff00"</span>
&#125;</code></pre></p>
<h4 id="Assign-the-new-Tag-to-a-task"><a href="#Assign-the-new-Tag-to-a-task" class="headerlink" title="Assign the new Tag to a task"></a>Assign the new Tag to a task</h4><pre><code class="hljs javascript"><span class="hljs-keyword">await</span> $vm.$store.dispatch(<span class="hljs-string">'addTagToTask'</span>, &#123; <span class="hljs-attr">task</span>: newTask, <span class="hljs-attr">tag</span>: fun &#125;)</code></pre>

  
  
    <div class="guide-links">
      
      
        <span>← <a href="/guide/configuration.html">Configuration</a></span>
      
      
      
        <span style="float: right;"><a href="/guide/customization-options.html">Customization Options</a> →</span>
      
    </div>
  
  <div class="footer">
    Caught a mistake or want to contribute to the documentation?
    <a href="https://github.com/BootGen/bootgen.github.io/blob/master/src/guide/creating-your-own-models.md" rel="noopener" target="_blank">
      Edit this on GitHub!
    </a>
  </div>
</div>

      </div>
      <script src="/js/smooth-scroll.min.js"></script>
    

    <!-- main custom script for sidebars, version selects etc. -->
    <script src="/js/css.escape.js"></script>
    <script src="/js/common.js"></script>

    <!-- search -->
    <link href="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.css" rel="stylesheet" type="text/css">
    <link rel="stylesheet" href="/css/search.css">
    <script src="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.js"></script>
    <script>
    [
      '#search-query-nav',
      '#search-query-sidebar',
      '#search-query-menu'
    ].forEach(function (selector) {
      if (!document.querySelector(selector)) return
      // search index defaults to v2
      var match = window.location.pathname.match(/^\/(v\d+)/)
      var version = match ? match[1] : 'v2'
      docsearch({
      appId: 'BH4D9OD16A',
      apiKey: '85cc3221c9f23bfbaa4e3913dd7625ea',
      indexName: 'vuejs',
      inputSelector: selector,
      algoliaOptions: { facetFilters: ["version:" + version] },
      autocompleteOptions: { hint: false, appendTo: 'body'}
      })
    })
    </script>
  </body>
</html>
